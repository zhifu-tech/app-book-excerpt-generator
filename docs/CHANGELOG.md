# 更新日志

所有重要的项目变更都会记录在此文件中。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [0.3.0] - 2025-12-18

### 🏗️ 架构重构 (Breaking Changes)

- **Monorepo 整合**: 将前端 (`app/`) 和后端 (`server/`) 代码整合进单一仓库，统一版本号为 `0.3.0`。
- **统一管理脚本**: 根目录新增 `run.sh` (v2.1)，合并了原有的 4 个分散脚本，成为管理项目的唯一入口。
- **CI/CD 统一**: 整合 GitHub Actions 工作流，实现一套流程同时管理前后端的构建与发布。
- **文档体系优化**: 合并并重构了所有技术文档，重命名 API 文档为 `API.md`。

### ✨ 核心改进

- **开发体验提升**:
  - `run.sh` 新增 `dev` (本地调试) 和 `docker-dev` (容器化调试) 指令。
  - 调整前端本地开发端口为 `8081`。
- **构建优化**:
  - 精简前端 Docker 镜像，不再复制无用的 `screenshots/` 目录。
  - 修复后端 Docker 构建流程，确保 `package-lock.json` 正确参与构建并使用 `npm ci`。
- **导入/导出功能**:
  - 支持导出完整的配置信息（内容 + 样式）为 JSON 文件。
  - 支持通过导入 JSON 文件还原书摘内容和样式。
  - 导入时包含版本校验，确保兼容性。

### 🔧 细节修复

- **脚本路径修复**: 修正了 `run.sh` 移动到根目录后导致的 `LIB_DIR` 及 SSL 证书路径错误。
- **精简指令**: 移除了冗余的 `fix-502` 和 `clear-cache` 指令。
- **代码规范**: 维持 100% Linter 通过率，同步更新版本号。

---

## [0.2.0] - 2025-12-09 (后端重大更新)

### 🎉 后端架构重构

- **分层架构设计**: 从单文件应用重构为专业的分层架构 (Controller, Service, Utils, Middleware, Routes)。
- **模块化设计**: 代码按功能模块组织，职责清晰。
- **配置管理优化**: 统一环境变量支持 (`dotenv`) 和配置集中化。
- **日志系统**: 实现专业的结构化日志系统，支持多级别和文件日志。
- **错误处理**: 统一错误处理中间件，自动记录错误日志。
- **请求日志**: 自动记录所有 HTTP 请求及性能监控。

### ✨ 新增功能

- **健康检查增强**: 健康检查端点返回运行时间信息。
- **环境变量配置**: 支持通过 `.env` 文件配置所有参数。
- **开发工具**: 添加 ESLint 和 Prettier 代码检查工具。

---

## [0.1.1] - 2025-12-18 (前端改进)

### 🔧 改进

- **UI 优化**: 将“保存”功能（图片下载）与“导出配置”功能分离，交互更加清晰。
- **文档完善**: 更新 `README.md`，增加后端服务依赖说明及开发指南。
- **依赖一致性**: 提交 `package-lock.json` 以确保 CI 环境依赖一致。

---

## [0.1.0] - 2025-12-06 (初始发布)

### 🎉 核心功能

- **前端**: 实时书摘预览、10+ 主题、多种中文字体、横竖排切换、高清 PNG 导出。
- **后端**: 初始版本发布，提供配置获取/保存 API，支持 JSON 持久化和 Docker。
- **移动端**: 响应式设计、缩略图预览及全屏预览。
- **部署**: 提供 `book-excerpt.sh` 脚本和 Nginx 预设。
